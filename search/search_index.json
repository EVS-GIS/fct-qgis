{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Fluvial Corridor Toolbox","text":"<p>The Fluvial Corridor Toolbox is a set of geoalgorithms intended to describe and measure fluvial features and processes.</p> <p>If your are looking for the ArcGIS version of the toolbox, please go to Fluvial Corridor Toolbox for ArcGIS.</p>"},{"location":"#supported-versions-of-qgis","title":"Supported versions of QGis","text":"<p>This toolbox is maintained only for LTR versions of QGIS, but should work with all versions &gt;= 3.34.</p> <p> </p>"},{"location":"#quick-start","title":"Quick start","text":""},{"location":"#installation","title":"Installation","text":"<p>The latest stable release of the Fluvial Corridor Toolbox is now available from the official QGIS plugins repository. </p>"},{"location":"#usage","title":"Usage","text":"<p>Most of the users will find all the tools they are looking for in the Fluvial Corridor Workflows, in the QGIS Processing panel.</p> <p></p> <p>The Fluvial Corridor Workflows are sets of algorithms from the Fluvial Corridor Toolbox prepared to math common users needs like calculating a Valley Bottom from a DEM, creating centerlines of polygons, disaggregate polygons or polylines and calculate metrics.</p> <p>In the Fluvial Corridor Toolbox, you will find all the detailed algorithms used in the workflow, and many more!</p>"},{"location":"#acknowledgements","title":"Acknowledgements","text":"<p>The toolbox is developed within the programme Trame bleue, espaces et continuit\u00e9s in collaboration with :</p> <ul> <li>UMR 5600 Environnement, ville et soci\u00e9t\u00e9.</li> <li>GeoPeka</li> </ul> <p>Funding and support have been kindly provided by :</p> <ul> <li>European Union   and R\u00e9gion Auvergne-Rh\u00f4ne-Alpes</li> <li>Association nationale pour la recherche technologique</li> <li>Agence de l\u2019eau Rh\u00f4ne-M\u00e9diterran\u00e9e-Corse</li> </ul>"},{"location":"#license","title":"License","text":"<p>The Fluvial Corridor Toolbox is released under the GNU Public License.</p>"},{"location":"install/","title":"Getting started","text":""},{"location":"install/#quick-install","title":"Quick install","text":"<p>The latest stable release of the Fluvial Corridor Toolbox is now available from the official QGIS plugins repository. </p>"},{"location":"install/#install-the-plugin-from-source-for-development-purpose","title":"Install the plugin from source (for development purpose)","text":""},{"location":"install/#create-a-virtualenv-for-the-fct-qgis-package","title":"Create a virtualenv for the fct-qgis package","text":"<pre><code>python3 -m venv env --system-site-packages\necho /usr/share/qgis/python/plugins &gt; ./env/lib/python&lt;version&gt;/site-packages/qgis_plugins.pth\n\nsource ./env/bin/activate\npython -m pip install -U pip\npython -m pip install -r requirements.txt\npython -m pip install --no-build-isolation -e .\n</code></pre>"},{"location":"install/#using-doit","title":"Using <code>doit</code>","text":"<p>On all platforms, you can install/update the plugin automatically with <code>doit</code> dependency. The following command will install the plugin in your local plugin folder:</p> <pre><code>python -m doit install\n</code></pre>"},{"location":"install/#without-doit","title":"Without <code>doit</code>","text":""},{"location":"install/#on-windows","title":"On Windows","text":"<p>On Windows, copy the directory <code>fct</code> to your local plugin folder, and rename it to <code>FluvialCorridorToolbox</code>.</p>"},{"location":"install/#on-linux-or-mac-os","title":"On Linux or Mac OS","text":"<p>On Linux or Mac OS, you can use the provided Makefile.</p> <p>The following command will install the plugin in your local plugin folder :</p> <pre><code>make\n</code></pre> <p>If needed, you can set <code>QGIS_USER_DIR</code> to point to your local folder where QGis stores installed plugins.</p> <pre><code>make QGIS_USER_DIR=/path/to/qgis/plugin/folder\n</code></pre> <p>On Linux, the default is <code>$(HOME)/.local/share/QGIS/QGIS3/profiles/default</code>.</p>"},{"location":"install/#building-cython-extensions","title":"Building Cython Extensions","text":"<p>Cython extensions are built when you install fct-qgis. </p> <p>Alternatively, you can build and install the Cython extension for Terrain Analysis algorithms with the following command :</p> <pre><code>make extensions\n</code></pre> <p>Alternatively, you can cd into the <code>cython</code> directory and type :</p> <pre><code>python3 setup.py install --install-platlib=/path/to/plugin/lib\n</code></pre> <p>where <code>/path/to/plugin</code> is the installation folder for the FCT plugin, for example <code>$QGIS_USER_DIR/FluvialCorridorToolbox</code>.</p>"},{"location":"install/#testing-algorithms","title":"Testing algorithms","text":"<p>Unit tests can be run with pytest an pytest-cov packages : </p> <pre><code>pytest --cov=fct --cov-report json:test/reports/coverage.json test\n</code></pre>"},{"location":"tests/","title":"Test Page","text":""},{"location":"tests/#citations-with-mdx-bib","title":"Citations with Mdx-Bib","text":"<p>For orginal segmentation procedure, (see Hubert, 2000)<sup>1</sup>. See also, dynamic progamming (Kehagias et al., 2006)<sup>2</sup>.</p> <p>Multiple citations : (Hubert, 2000; Kehagias et al., 2006)<sup>1</sup><sup>2</sup></p> <p>Unknow citation : [@unknown1970]</p> <p>Refcite [@other2018]</p> <p>Quote</p> <p>[+@hallac2018] says \u2026</p>"},{"location":"tests/#mathjax-example","title":"MathJax Example","text":"<p>When \\(a \\ne 0\\), there are two solutions to \\(ax^2 + bx + c = 0\\) and they are $$x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$$</p>"},{"location":"tests/#admonition","title":"Admonition","text":"<p>Note</p> <p>Lorem ipsum \u2026</p> <p>Abstract|Summary</p> <p>Lorem ipsum \u2026</p> <p>Info</p> <p>Lorem ipsum \u2026</p> <p>Example</p> <p>Lorem ipsum \u2026</p> <p>Success</p> <p>Lorem ipsum \u2026</p> <p>Failure</p> <p>Lorem ipsum \u2026</p> <p>Warning</p> <p>Lorem ipsum \u2026</p> <p>Danger</p> <p>Lorem ipsum \u2026</p> <p>Bug</p> <p>Lorem ipsum \u2026</p>"},{"location":"tests/#references","title":"References","text":"<p>[@other2018]: Other, 2018. Among toher things. Intl Pub.</p> <ol> <li> <p>Hubert, P. (2000). The segmentation procedure as a tool for discrete modeling of hydrometeorological regimes. Stochastic Environmental Research and Risk Assessment, 14(4-5), 297\u2013304. https://doi.org/10.1007/PL00013450 \u21a9\u21a9</p> </li> <li> <p>Kehagias, Ath., Nidelkou, Ev., &amp; Petridis, V. (2006). A dynamic programming segmentation procedure for hydrological and environmental time series. Stochastic Environmental Research and Risk Assessment, 20(1-2), 77\u201394. https://doi.org/10.1007/s00477-005-0013-6 \u21a9\u21a9</p> </li> </ol>"},{"location":"tutorials/dem_to_dgo/","title":"From DEM to DGO","text":"<p>One of the main goals of the Fluvial Corridor Toolbox for QGIS is to produce a disaggregated valley bottom using a DEM and an hydrographic network polyline. This procedure has been simplified in the Fluvial Corridor Workflows included with the toolbox.  Example data from french IGN-F is available in the tutorials directory. </p> <p></p>"},{"location":"tutorials/dem_to_dgo/#produce-a-valley-bottom-layer","title":"Produce a valley bottom layer","text":"<p>To produce the valley bottom layer, you will need a DEM and an hydrographic network layer. The hydrographic network does not have to match perfectly the DEM, but it\u2019s better if it does. If you don\u2019t have an hydrographic network layer, it\u2019s possible to calculate it from the DEM. </p> <p>The accuracy of the resulting valley bottom depends on the resolution of your DEM. Make sure the z-coordinate accuracy is also sufficient to limit flat areas in wide valley bottoms.</p> <p>In tutorials data, you will find an extract from the french IGN\u2019s BDAlti DEM at a resolution of 25m. This resolution is sufficient for the Romanche valley bottom, an alpine watercourse in a region with marked relief. You will also find a polyline of the Romanche river extracted from the french IGN\u2019s BDTopo. </p>"},{"location":"tutorials/dem_to_dgo/#prepare-your-layers","title":"Prepare your layers","text":"<p>First, make sure your polyline type is single LineString and not MultiLineString. If not, you can use the Aggregate Undirected Lines algorithm or the QGIS Multipart to singleparts algorithm to fix it. </p> <p>With some DEM, you will also have to fill small depressions to avoid errors in flow direction calculation. To do it, use the Fill Depressions algorithm.</p>"},{"location":"tutorials/dem_to_dgo/#calculate-the-valley-bottom","title":"Calculate the valley bottom","text":"<p>Use the Valley Bottom Workflow to calculate the valley bottom. The calculation of the valley bottom requires the prior calculation of the detrended DEM. This detrended DEM is saved in a temporary file if you use the Valley Bottom Workflow. If you want to keep it in a raster layer, you should use the Valley Bottom Algorithm instead.</p> <p>You will have to choose between 3 detrending methods. Refer to the Valley Bottom Workflow documentation to decide which is better for you. The <code>nearest</code> method should be a good solution in most of the cases. </p> <p>In wide flat areas, if the resulting valley bottom is too narrow, try to increase the <code>Large buffer size</code> parameter. </p> <p></p>"},{"location":"tutorials/dem_to_dgo/#refine-valley-bottom","title":"Refine valley bottom","text":"<p>To process the nexts steps, your valley bottom layer must respect the following conditions:</p> <ul> <li>Only one fully connected feature for each river. If there are deconnections in narrow valleys, try increasing the <code>Maximum threshold value</code> of the previous step. You can also merge polygons by manually drawing missing features. </li> <li>No small polygons outside of the main polygon. If there are ones, try to increase the <code>Aggregation distance</code> of the previous step or remove them manually.</li> <li>A numeric field with an identifier to associate each network polyline with his valley bottom polygon. If there is no such field, create one. </li> </ul> <p></p>"},{"location":"tutorials/dem_to_dgo/#calculate-the-centerline","title":"Calculate the Centerline","text":"<p>You can directly calculate the DGOs using the network polyline but the result is better using the centerline (ie. medial axis) of the valley bottom.  To calculate it, you will need a polyline that intersects the valley bottom polygon at least upstream and downstream. You can use the QGIS Extend Lines algorithm with the network polyline or just draw a dummy polyline that does the job. This polyline will never be used after. </p> <p></p> <p>Run the Centerline Workflow with your DEM, your refined valley bottom, and your polyline that instersect it. The result is a centerline which is oriented upstream to downstream. If you want to smooth it more, you can use the QGIS Simplify Douglas-Peucker algorithm, then the QGIS Smooth Geometry algorithm.</p> <p></p>"},{"location":"tutorials/dem_to_dgo/#disaggregate-the-valley-bottom-along-the-centerline","title":"Disaggregate the valley bottom along the centerline","text":"<p>Before carrying out the disaggregation, we advise to simplify the valley bottom polygon with the QGIS Simplify Douglas-Peucker algorithm. Disaggregating the raw valley bottom is possible, but will take a lot of time and resources. </p> <p>From now, you are ready to disaggregate the valley bottom in DGOs. Use the Segmentation Workflow to do it, using the valley bottom polygon as feature to segment and the centerline. Choose the segmentation step (in map unit) you want for your DGOs size. </p> <p></p>"}]}